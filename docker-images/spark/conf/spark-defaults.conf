# Core Spark configurations
spark.master                                        spark://spark-master:7077
spark.serializer                                    org.apache.spark.serializer.KryoSerializer
spark.driver.extraClassPath                         /opt/spark/jars/*
spark.executor.extraClassPath                       /opt/spark/jars/*

# S3/MinIO configurations
spark.hadoop.fs.s3a.endpoint                        http://yt-minio:9000
spark.hadoop.fs.s3a.access.key                      minio
spark.hadoop.fs.s3a.secret.key                      minio123
spark.hadoop.fs.s3a.path.style.access               true
spark.hadoop.fs.s3a.connection.ssl.enabled          false
spark.hadoop.fs.s3a.impl                            org.apache.hadoop.fs.s3a.S3AFileSystem
spark.hadoop.fs.s3a.aws.credentials.provider        org.apache.hadoop.fs.s3a.SimpleAWSCredentialsProvider

# Memory and resource configurations
spark.driver.memory                                 1g
spark.executor.memory                               2g
spark.executor.cores                                2

# Warehouse directory
spark.sql.warehouse.dir                             s3a://lakehouse/

# S3A Performance Optimizations
spark.hadoop.fs.s3a.connection.maximum              100
spark.hadoop.fs.s3a.connection.timeout              200000
spark.hadoop.fs.s3a.connection.establish.timeout    5000
spark.hadoop.fs.s3a.fast.upload                     true
spark.hadoop.fs.s3a.multipart.size                  104857600
spark.hadoop.fs.s3a.multipart.threshold             104857600
spark.hadoop.fs.s3a.committer.threads               20
spark.hadoop.fs.s3a.connection.retry.count          10
spark.hadoop.fs.s3a.socket.timeout                  200000

# Delta Lake configurations
spark.sql.extensions                                io.delta.sql.DeltaSparkSessionExtension
spark.sql.catalog.spark_catalog                     org.apache.spark.sql.delta.catalog.DeltaCatalog

# General Spark Optimizations
spark.scheduler.mode                                FAIR
spark.speculation                                   false
spark.serializer.objectStreamReset                  100
spark.rdd.compress                                  true
spark.shuffle.compress                              true
spark.shuffle.spill.compress                        true